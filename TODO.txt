"github.com/twelvelabs/termite/log"
"github.com/twelvelabs/termite/run"

CmdClient{
    stubbed: bool
    stubs: []*stub{}
}

CmdClient := run.NewCmdClient()
CmdClient := run.NewCmdClient().Stub()
CmdClient.RegisterStub(
    run.Match("echo foo"),
    run.Response("foo", 0),
    // run.RegexMatch("^echo\s+(.+)$"),
    // run.RegexResponse("$1", 0),
)

a.CmdClient.NewCommand("echo", "foo")
    cmd := exec.Command(...)
    return cmdWrapper{ Cmd: cmd, cmdClient: c }


cmdWrapper{
    *exec.Cmd
    cmdClient *run.CmdClient
}
func (cw *cmdWrapper) Output() error {
    if !cw.cmdClient.Stubbed() {
        return cw.Cmd.Output()
    }
    stub := cw.cmdClient.MatchStub(cw.Cmd.Args) // should set matched && output
    if stub == nil {
        panic(...)
    }
    return stub.Output()
}

func (cw *cmdWrapper) Run() error {
    if !cw.cmdClient.Stubbed() {
        return cw.Cmd.Run()
    }
    stub := cw.cmdClient.MatchStub(cw.Cmd.Args) // should set matched && output
    if stub == nil {
        panic(...)
    }
    return stub.Run()
}
